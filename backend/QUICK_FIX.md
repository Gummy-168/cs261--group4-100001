# ‚ö° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß - Notification Queue Error

## üéØ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
```
Error 400: Invalid column name 'eventId'
‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ
```

---

## ‚ö° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏¥‡∏î SQL Server Management Studio (1 ‡∏ô‡∏≤‡∏ó‡∏µ)

1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° **SQL Server Management Studio**
2. Connect ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Server
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• **EventDB**

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Copy & Paste ‡πÇ‡∏Ñ‡πâ‡∏î SQL ‡∏ô‡∏µ‡πâ (2 ‡∏ô‡∏≤‡∏ó‡∏µ)

```sql
USE EventDB;
GO

-- ‡∏•‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
IF OBJECT_ID('dbo.notification_queue', 'U') IS NOT NULL
    DROP TABLE dbo.notification_queue;
GO

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
CREATE TABLE dbo.notification_queue (
    id BIGINT IDENTITY(1,1) PRIMARY KEY,
    user_id BIGINT NOT NULL,
    event_id BIGINT NOT NULL,
    send_at DATETIME2 NOT NULL,
    status NVARCHAR(20) NOT NULL DEFAULT 'PENDING',
    created_at DATETIME2 DEFAULT GETDATE(),
    updated_at DATETIME2 DEFAULT GETDATE(),
    
    CONSTRAINT FK_notification_queue_user FOREIGN KEY (user_id) 
        REFERENCES dbo.users(id) ON DELETE CASCADE,
    CONSTRAINT FK_notification_queue_event FOREIGN KEY (event_id) 
        REFERENCES dbo.events(id) ON DELETE CASCADE
);
GO

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Index
CREATE INDEX idx_notification_queue_user_id ON dbo.notification_queue(user_id);
CREATE INDEX idx_notification_queue_event_id ON dbo.notification_queue(event_id);
CREATE INDEX idx_notification_queue_user_event ON dbo.notification_queue(user_id, event_id);
GO

PRINT '‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
GO
```

‡∏Å‡∏î **Execute (F5)** ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‚ñ∂Ô∏è

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

```sql
-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
SELECT name FROM sys.tables WHERE name = 'notification_queue';

-- ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: notification_queue
```

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Restart Backend (1 ‡∏ô‡∏≤‡∏ó‡∏µ)

**‡πÉ‡∏ô Terminal:**
```bash
cd backend
mvn spring-boot:run
```

**‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô Backend ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß:**
- ‡∏Å‡∏î `Ctrl + C` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î
- ‡∏£‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö (30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

1. ‡πÄ‡∏õ‡∏¥‡∏î Browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `http://localhost:5173`
2. Login ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
3. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å** (‡∏´‡∏±‡∏ß‡πÉ‡∏à) ‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏´‡∏ô‡∏∂‡πà‡∏á
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ **‡πÑ‡∏°‡πà‡∏°‡∏µ Error 400** ‡πÅ‡∏•‡πâ‡∏ß ‚úÖ

---

## ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!

‡∏´‡∏≤‡∏Å‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏ß‡∏£‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß

---

## üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Optional)

### ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ notification ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
```sql
SELECT 
    nq.id,
    u.username,
    e.title AS event_name,
    nq.send_at,
    nq.status
FROM dbo.notification_queue nq
JOIN dbo.users u ON nq.user_id = u.id
JOIN dbo.events e ON nq.event_id = e.id
ORDER BY nq.created_at DESC;
```

---

## ‚ùå ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
```bash
curl http://localhost:8080/api/events
```
‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console ‡πÉ‡∏ô Browser (F12)
‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ error ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏µ‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Backend Log
‡∏î‡∏π Terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô Spring Boot ‡∏ß‡πà‡∏≤‡∏°‡∏µ error ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á users ‡πÅ‡∏•‡∏∞ events ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
```sql
SELECT name FROM sys.tables WHERE name IN ('users', 'events');
```
‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á

---

## üìû ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å?

‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:

1. **Error message ‡∏à‡∏≤‡∏Å Browser Console (F12)**
2. **Backend log (Terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô Spring Boot)**
3. **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:**
   ```sql
   SELECT name FROM sys.tables;
   ```

---

## üìã ‡∏™‡∏£‡∏∏‡∏õ

| ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô | ‡πÄ‡∏ß‡∏•‡∏≤ | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|---------|------|-------|
| 1. ‡πÄ‡∏õ‡∏¥‡∏î SSMS | 1 ‡∏ô‡∏≤‡∏ó‡∏µ | ‚¨ú |
| 2. ‡∏£‡∏±‡∏ô SQL | 2 ‡∏ô‡∏≤‡∏ó‡∏µ | ‚¨ú |
| 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö | 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ | ‚¨ú |
| 4. Restart Backend | 1 ‡∏ô‡∏≤‡∏ó‡∏µ | ‚¨ú |
| 5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö | 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ | ‚¨ú |
| **‡∏£‡∏ß‡∏°** | **5 ‡∏ô‡∏≤‡∏ó‡∏µ** | |

---

## üéâ ‡∏ó‡∏≥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:
- ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ
- ‚úÖ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á notification ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏™‡πà‡∏á 1 ‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°)
